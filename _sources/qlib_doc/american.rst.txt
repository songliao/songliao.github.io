======================================
美式期权
======================================

:ref:`美式期权<american>` 是一种期权合同，允许持有者在到期日(包括到期日)之前的任何时间行使期权权利。

.. function:: Pv(double spot, double rf, double b, double volatility, double ttm, OptionType type, double strike, Method approx_method);

.. container:: custom

    **Parameters:**
        **spot: double**
            | 标的价格。
        **rf: double**
            | 无风险利率。 
        **b: double**
            | 持仓成本。
        **volatility: double**
            | 波动率。
        **ttm: double**
            | 到期时间。 
        **type: OptionType**
            | 期权类型, **CALL** 或 **PUT**。
        **strike: double**
            | 行权价格。
        **approx_method: Method**
            | 美式估计类型，包括 **BAW** [1]_， **BS_1993** [2]_ 和 **BS_2002** [3]_。

    **Returns: double**
        | 返回美式期权的现值。

Example
----------------------

.. code-block:: c++

    #include <gtest/gtest.h>
    #include "qlib/analytical_engine/american.h"

    TEST(TestAnalytical, American)
    {
        double spot = 90;
        double strike = 100;
        double r = 0.1;
        double b = 0;
        double vol = 0.15;
        double ttm = 0.1;
        
        auto pv = AnalyticalEngine::American::Pv(spot, r, b, vol, ttm, OptionType::CALL, 
                                                strike, AnalyticalEngine::American::Method::BAW);

        EXPECT_NEAR(pv, 0.02064, 1e-5) << "American option Pv calculation error";
    }
   

参考资料
===========

.. [1] BARONE-ADESI, G., AND R. E. WHALEY (1987): "Efficient Analytic Approximation of American Option Values," Journal of Finance, 42(2), 301-320.

.. [2] BJERKSUND, P., AND G. STENSLAND (1993b): "Closed-Form Approximation of American Options," Scandinavian Journal of Management, 9,87-99.

.. [3] BJERKSUND, P., AND G. STENSLAND (2002): "Closed-Form Valuation of American Options," Working paper NHH.