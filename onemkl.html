

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>OneMKL随机数生成器</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/fonts.css" type="text/css" />
  <link rel="stylesheet" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="CUDA Toolkit" href="cuda_intro.html" />
    <link rel="prev" title="随机数采样的fastnorm算法及其在蒙特卡洛定价上的应用" href="fastnorm.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> 蒙卡定价引擎开发
          

          
            
            <img src="_static/Qlib_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="project_introduction.html">项目简介</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="project_documentation.html">项目知识库</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="project_introduction.html">项目简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="fin_basic.html">金融工程基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="fin_engineering.html">金融工程开发技术基础</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="fin_engineer_upgrade.html">金融工程开发技术进阶</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="openMP.html">OpenMP Crash Course</a></li>
<li class="toctree-l3"><a class="reference internal" href="fastnorm.html">随机数采样的<em>fastnorm</em>算法及其在蒙特卡洛定价上的应用</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OneMKL随机数生成器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simd">SIMD简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intel-oneapi">Intel OneAPI简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">OneMKL优化随机数的方法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">随机数生成器在蒙卡中的应用</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">具体示例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">Appendix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cuda_intro.html">CUDA Toolkit</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="option_definition.html">广义期权的一般创建方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="barrier_example.html">广义期权的实际案例</a></li>
<li class="toctree-l2"><a class="reference internal" href="closed_formulas.html">常见奇异期权释义及其（近似）解析解实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="greeks.html">希腊字母</a></li>
<li class="toctree-l2"><a class="reference internal" href="exotic_options_on_two_asset.html">部分挂钩双标的奇异衍生品及其定价</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_callables.html">定价引擎应用案例：自动赎回结构</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="paper_link.html">项目论文</a></li>
<li class="toctree-l1"><a class="reference external" href="_static/qlib_api/index.html#file://">代码API references</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">蒙卡定价引擎开发</a>
        
      </nav>


      <div class="wy-nav-content">
<div class="git-ribbon">
  <a href="http://github.com/SwissDataScienceCenter" rel="me">Join us on GitHub</a>
</div>

        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="project_documentation.html">项目知识库</a> &raquo;</li>
        
          <li><a href="fin_engineer_upgrade.html">金融工程开发技术进阶</a> &raquo;</li>
        
      <li>OneMKL随机数生成器</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/onemkl.rst.txt" rel="nofollow"> 查看页面源码</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="onemkl">
<h1>OneMKL随机数生成器<a class="headerlink" href="#onemkl" title="永久链接至标题">¶</a></h1>
<p>Intel® OneMKL (oneAPI Math Kernel Library)是一个高度优化和广泛并行的程序指令的计算数学库，用于需要性能最大化的程序应用。OneMKL包含了针对CPU架构的高性能优化，能够在各种CPU架构上实现性能，以及针对某些关键功能的Intel图形技术。针对随机数生成，Intel® OneMKL提供了常用的具有离散分布和随机分布的伪随机、准随机和非确定性的随机数生成程序。与普通的随机数生成器不同的是，OneMKL随机数生成器通过调用高度优化的基本随机数生成器和基于SIMD的向量数学函数进行开发，充分利用现代CPU对SIMD向量化计算的优势，从而能够大幅提升随机数生成的速率。</p>
<p>OneMKL的安装 <a class="reference internal" href="onemkl_installation.html#onemklinstall"><span class="std std-ref">详见</span></a>。</p>
<div class="section" id="simd">
<h2>SIMD简介<a class="headerlink" href="#simd" title="永久链接至标题">¶</a></h2>
<p>SIMD (Single Instruction, Multiple Data, 单指令多数据流) <a class="footnote-reference brackets" href="#id22" id="id1">1</a> 是弗林分类法（ <a class="reference internal" href="#flynn"><span class="std std-ref">Flynn’s Taxnomy</span></a> ）中的一种并行处理。SIMD可以是内部的，即硬件设计的一部分，并且能够通过指令集架构（instruction set architecture, ISA）直接访问。然而，这些机器使用数据层级上的并行性（parallelism），而不是并发性（concurrency）：虽然有同时进行的并行运算，但是每个SIMD单元无论何时都执行相同的指令，只是数据不同而已。</p>
<p>SIMD认为计算机具有多个处理元素，并且这些处理元素在多个数据点上同时执行相同的运算。通常情况下，SIMD单元中的操作包括基本的数学运算（比如加、减、乘、除）及其他常见的数学运算，包括绝对值（abs）和平方根（sqrt）的运算 <a class="footnote-reference brackets" href="#id23" id="id2">2</a>。</p>
<div class="section" id="id3">
<h3>经典示例<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<p>SIMD接收两个向量作为输入（每个向量都有一组运算对象），对这两组运算对象（每个向量都有一个操作数）执行相同的运算，并输出一个带结果的向量：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">op1</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>如下图所示（假设op1为加）：</p>
<img alt="_images/SIMD.png" src="_images/SIMD.png" />
</div>
</div>
<div class="section" id="intel-oneapi">
<h2>Intel OneAPI简介<a class="headerlink" href="#intel-oneapi" title="永久链接至标题">¶</a></h2>
<p><a class="reference external" href="https://www.oneapi.io/">Intel OneAPI</a> <a class="footnote-reference brackets" href="#id24" id="id5">3</a> 是一个统一应用程序编程接口的开放标准，其目的在于能够跨越不同的计算加速器架构下使用，包括GPU，AI加速器和FPGA(Field Programmable Gate Array，现场可编程逻辑门阵列)等。</p>
<p>OneAPI的开发目的是解决开发人员在不同的体系架构中维护独立代码库、多种编程语言以及不同工具和工作流下的需求，OneAPI通过在加速器架构之间提供相同的语言和编程模型，进而简化了软件开发。因此，OneAPI涵盖了多个能够在计算加速中进行大幅优化的领域，并且针对不同的应用情形，OneAPI开发了数学、深度学习、机器学习、视频处理等库。</p>
<div class="section" id="id6">
<h3>OneMKL<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<p>Intel OneMKL <a class="footnote-reference brackets" href="#id25" id="id7">4</a> 是一个科学计算的优化库，该库支持Intel处理器，并能够应用于Windows，Linux和MacOS操作系统。OneMKL通过数学程序为解决大型计算问题的软件应用提升了性能。</p>
<ul class="simple">
<li><p>增强的数学程序可以使得开发人员和数据科学家能够创建性能科学、工程和金融应用等。</p></li>
<li><p>其核心的方程包括BLAS、LAPACK、稀疏矩阵求解、快速傅立叶变换（FFT）、随机数生成方程（RNG）、概括统计、数据拟合和向量数学</p></li>
<li><p>为当前和未来几代的Intel CPU、GPU和其他加速器优化应用程序</p></li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2>OneMKL优化随机数的方法<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h2>
<div class="section" id="id9">
<h3>基本随机数生成器的优化<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<p>Intel OneMKL提供了两种基于计数（counter-based）的基本随机数生成器：ARS-5和Philox4x32-10：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>ARS-5</p></td>
<td><p>ARS-5是基于AES（Advanced Encryption Standard，高级加密标准）的基本随机数生成器，并且在发生器状态中进行了五次算法迭代。</p></td>
</tr>
<tr class="row-even"><td><p>Philox4x32-10</p></td>
<td><p>Philox4x32-10依赖于代换-置换网络（substitution-permutation network, SPN），该网络负责4个32位输入参数上产生高度扩散的双射（bijection）和10轮的置换。</p></td>
</tr>
</tbody>
</table>
<p>这两个生成器的周期都能产生 <span class="math notranslate nohighlight">\(2^{130}\)</span> 的随机数序列，并且都展现出了良好的统计特性及优异的随机数序列生成性能 <a class="footnote-reference brackets" href="#id26" id="id10">5</a> 。不仅如此，ARS-5和Philox4x32-10的状态规模较小，能够更容易地在不同硬件上进行向量化和并行化运算。</p>
<p>2021年中上旬，OneMKL针对ARS-5使用的向量高级加密标准（Vector Advanced Encryption Standard, VAES）指令集进行了额外优化，大幅提升了该随机数生成器的性能。</p>
</div>
<div class="section" id="vectorization">
<h3>Vectorization<a class="headerlink" href="#vectorization" title="永久链接至标题">¶</a></h3>
<p>向量化（vectorization）是提高现代CPU性能的关键工具 <a class="footnote-reference brackets" href="#id27" id="id11">6</a> 。通过向量化，能够实现从一次操作多个值转换为一次操作一组值，而现代CPU能够直接支持 <strong>SIMD</strong> 向量运算。</p>
<p>例如，一个512位寄存器的CPU可以容纳16个32位单精度的double浮点数并进行单次运算。比单次执行一条指令快16倍。将向量化与多线程和多核CPU结合，可以带来数量级的性能提升。</p>
<div class="section" id="id12">
<h4>指令级并行<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h4>
<p>随着多核芯片设计为指令级并行 (instruction level parallelism)提供了可能性，SIMD寄存器的宽度也因此在稳步增加，开发指令级并行性也被称为 <strong>向量化</strong>。</p>
<p>目前，最新的处理器都具有多核，并且能够在日益增加的大型数据集上执行单指令，并且SIMD也提供了一种使用更少功耗且提高性能的方法。Intel OneAPI通过将多线程和向量化结合起来，能够在最新处理器上最大程度地实现性能方面的提升。</p>
</div>
</div>
</div>
<div class="section" id="id13">
<h2>随机数生成器在蒙卡中的应用<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h2>
<p>在蒙卡模拟中，随机数服从正态分布。而OneMKL中针对蒙卡模拟中使用的随机数是其矢量（Vector Statistics）统计生成器的结果。在下文中将详细介绍OneMKL生成随机数的基本逻辑及其正态分布随机数的具体生成方法。</p>
<div class="section" id="distribution">
<h3>分布（Distribution）<a class="headerlink" href="#distribution" title="永久链接至标题">¶</a></h3>
<p>所有非均匀分布的生成，无论是离散的还是连续的，都是在均匀分布的基础上生成的，这在OneMKL中被称为BRNGs(Basic Random Number Generators)。通过对均匀分布的伪随机数进行适当的变换，就能够获得非均匀分布的随机数。这种转换方法在OneMKL中被称为 <strong>生成方法</strong> （generation method）。针对给定的分布，可以使用不同的生成方法。</p>
</div>
<div class="section" id="service-routines">
<h3>服务程序（Service Routines）<a class="headerlink" href="#service-routines" title="永久链接至标题">¶</a></h3>
<p>OneMKL通过流处理提供服务，流处理包括创建、删除、或复制流的程序，以及获得一个基本生成器的索引，一条随机流也可以在二进制文件中保存并读取。</p>
<p>大多数和生成器相关的工作主要包括三个基本步骤：</p>
<ol class="arabic simple">
<li><p>创建并初始化一个流</p></li>
<li><p>根据给定的分布生成随机数</p></li>
<li><p>删除流</p></li>
</ol>
<div class="section" id="id14">
<h4>创建流的方式<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h4>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vslNewStream</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">brng</span><span class="p">,</span><span class="w"> </span><span class="n">seed</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数名称</p></th>
<th class="head"><p>定义</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>brng</p></td>
<td><div class="line-block">
<div class="line">初始化流的基本随机数生成器，详见 <a class="reference external" href="https://www.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/top/statistical-functions/random-number-generators/basic-generators/brng-parameter-definition.html#brng-parameter-definition_TBL10-2">brng参数值</a> 。</div>
<div class="line">oneMKL特别指出，MT2203伪随机数产生器可用于并行蒙特卡洛模拟 <a class="footnote-reference brackets" href="#id28" id="id15">7</a>。MT2203是一组6024个发生器，可产生多达6024个独立的随机数序列。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>seed</p></td>
<td><p>正整数，流的初始状态。在使用准随机数生成器的情况下，使用seed参数来设置随机数的维度。如果维度大于brng可以支持的维度或者seed的值小于1，那么该维度将被设置为1。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id16">
<h3>命名规则<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h3>
<p>对于给定概率分布的每个生成器程序的原型符合以下的结构：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">function</span><span class="w"> </span><span class="n">name</span><span class="o">&gt;</span><span class="p">(</span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="n">distribution</span><span class="w"> </span><span class="n">parameters</span><span class="o">&gt;</span><span class="p">])</span><span class="w"></span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数名称</p></th>
<th class="head"><p>定义</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&lt;function name&gt;</p></td>
<td><p>指定概率分布函数的随机数生成器的结构方程</p></td>
</tr>
<tr class="row-odd"><td><p>stream</p></td>
<td><p>一个随机序列，可以通过流状态描述符进行操作。</p></td>
</tr>
<tr class="row-even"><td><p>method</p></td>
<td><p>对应分布下随机数的生成方法</p></td>
</tr>
<tr class="row-odd"><td><p>n</p></td>
<td><p>定义要生成的随机数的数量。如果n小于或等于0，那么不生成任何值。</p></td>
</tr>
<tr class="row-even"><td><p>r</p></td>
<td><p>为生成的数定义了目标数组。数组的维度必须足够大，以存储至少n个随机数。</p></td>
</tr>
</tbody>
</table>
<div class="section" id="function-name">
<h4>&lt;function name&gt;命名规则<a class="headerlink" href="#function-name" title="永久链接至标题">¶</a></h4>
<p>随机数生成的程序具有以下结构：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">&lt;</span><span class="n">结果类型</span><span class="o">&gt;</span><span class="n">Rng</span><span class="o">&lt;</span><span class="n">分布名称</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>结果类型名称</p></th>
<th class="head"><p>对应的结果类型</p></th>
<th class="head"><p>注意事项</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>s</p></td>
<td><p>float</p></td>
<td><p>仅适用于 <strong>连续分布</strong></p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>double</p></td>
<td><p>仅适用于 <strong>连续分布</strong></p></td>
</tr>
<tr class="row-even"><td><p>i</p></td>
<td><p>int</p></td>
<td><p>仅适用于 <strong>离散分布</strong></p></td>
</tr>
</tbody>
</table>
<p>OneMKL支持的分布，详见 <a class="reference external" href="https://www.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/top/statistical-functions/random-number-generators/distribution-generators.html#distribution-generators">所有的分布生成器</a> 。</p>
<p>针对在蒙卡模拟中的实际运用，相关的随机数生成所服从的正态分布在OneMKL中对应的分布名称为 <strong>Gaussian</strong>。因此，需要调用的结构为</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vsRngGaussian</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="method">
<h4>method命名规则<a class="headerlink" href="#method" title="永久链接至标题">¶</a></h4>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">VSL_RNG_METHOD_</span><span class="o">&lt;</span><span class="n">distribution</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;</span><span class="n">method</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数名称</p></th>
<th class="head"><p>定义</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&lt;distribution&gt;</p></td>
<td><p>概率方程</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;method&gt;</p></td>
<td><p>对应概率密度下的方法名称</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id18">
<h4>正态分布支持的&lt;method&gt;<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h4>
<p>在OneMKL中支持三种正态分布的生成方法：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>方法名称</p></th>
<th class="head"><p>定义</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BOXMULLER</p></td>
<td><p>BOXMULLER通过均匀分布的数字 <span class="math notranslate nohighlight">\(u_1\)</span> 和 <span class="math notranslate nohighlight">\(u_2\)</span> 产生正态分布的随机数 <span class="math notranslate nohighlight">\(x\)</span>。</p></td>
</tr>
<tr class="row-odd"><td><p>BOXMULLER2</p></td>
<td><p>BOXMULLER2通过均匀分布的数字 <span class="math notranslate nohighlight">\(u_1\)</span> 和 <span class="math notranslate nohighlight">\(u_2\)</span> 产生正态分布的随机数 <span class="math notranslate nohighlight">\(x_1\)</span> 和 <span class="math notranslate nohighlight">\(x_2\)</span>，详见 <a class="reference internal" href="monte_carlo_variance_reduction.html#box-muller"><span class="std std-ref">Box-Muller 方法</span></a>。</p></td>
</tr>
<tr class="row-even"><td><p>ICDF</p></td>
<td><p>Inverse Cumulative Distribution Function，逆累积分布函数法。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="永久链接至标题">¶</a></h3>
<p>要得到一个由n个独立同分布的正态（高斯）分布随机数并且采用ICDF方法组成的向量r，其均值为a，标准差为sigma，其定义如下：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vsRngGaussian</span><span class="p">(</span><span class="n">VSL_RNG_METHOD_GAUSSIAN_ICDF</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id19">
<h2>具体示例<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h2>
<p>生成1万个随机数，指定随机数生成的种子为777，并服从（0，1）正态分布:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;mkl.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span><span class="w"></span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">eps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">(</span><span class="n">calloc</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)));</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 初始化流状态描述符</span>
<span class="w">  </span><span class="n">VSLStreamStatePtr</span><span class="w"> </span><span class="n">stream</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 初始化和创建流</span>
<span class="w">  </span><span class="n">vslNewStream</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">VSL_BRNG_MT2203</span><span class="p">,</span><span class="w">  </span><span class="mi">777</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 产生随机数</span>
<span class="w">  </span><span class="n">vsRngGaussian</span><span class="p">(</span><span class="n">VSL_RNG_METHOD_GAUSSIAN_ICDF</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">eps</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 删除流</span>
<span class="w">  </span><span class="n">vslDeleteStream</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="appendix">
<h2>Appendix<a class="headerlink" href="#appendix" title="永久链接至标题">¶</a></h2>
<div class="section" id="flynn">
<span id="id20"></span><h3>弗林分类法<a class="headerlink" href="#flynn" title="永久链接至标题">¶</a></h3>
<p>Flynn’s taxonomy <a class="footnote-reference brackets" href="#id29" id="id21">8</a> 是Michael J. Flynn在1966年提出的一种计算机体系结构的分类方法，并在1972年得到拓展。该分类系统一直延续使用至今，并被广泛应用于现代处理器及其功能的设计。随着多处理CPU的兴起，多道程序设计环境已经演变为分类系统的扩展。</p>
<p>弗林分类法的基本思想是计算机程序由两种流组成：数据流和任务（或指令）流。该方法提供了四种组合的可能性，这取决于流是连续的(单个流)还是并行的(多个流)。其组合如下：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>单个指令流</p></th>
<th class="head"><p>多个指令流</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>单个数据流</strong></p></td>
<td><p>SISD</p></td>
<td><p>MISD</p></td>
</tr>
<tr class="row-odd"><td><p><strong>多个数据流</strong></p></td>
<td><p>SIMD</p></td>
<td><p>MIMD</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="永久链接至标题">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id22"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Single instruction, multiple data, Wikipedia <a class="reference external" href="https://en.wikipedia.org/wiki/Single_instruction,_multiple_data">https://en.wikipedia.org/wiki/Single_instruction,_multiple_data</a>.</p>
</dd>
<dt class="label" id="id23"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Cardoso, J.M.P., Coutinho, J.G.F. and Diniz, P.C. (2017) High-performance embedded computing, Embedded Computing for High Performance. Morgan Kaufmann.</p>
</dd>
<dt class="label" id="id24"><span class="brackets"><a class="fn-backref" href="#id5">3</a></span></dt>
<dd><p>oneAPI (compute acceleration), Wikipedia <a class="reference external" href="https://en.wikipedia.org/wiki/OneAPI_(compute_acceleration">https://en.wikipedia.org/wiki/OneAPI_(compute_acceleration</a>).</p>
</dd>
<dt class="label" id="id25"><span class="brackets"><a class="fn-backref" href="#id7">4</a></span></dt>
<dd><p>Math Kernel Library, Wikipedia <a class="reference external" href="https://en.wikipedia.org/wiki/Math_Kernel_Library">https://en.wikipedia.org/wiki/Math_Kernel_Library</a>.</p>
</dd>
<dt class="label" id="id26"><span class="brackets"><a class="fn-backref" href="#id10">5</a></span></dt>
<dd><p>Dyakov, P., and Elizarova, A. (2021) Counter-based Random Number Generators in Intel® oneAPI Math Kernel Library, <a class="reference external" href="https://www.intel.com/content/www/us/en/developer/articles/technical/counter-based-random-number-generators-in-oneapi.html">https://www.intel.com/content/www/us/en/developer/articles/technical/counter-based-random-number-generators-in-oneapi.html</a>.</p>
</dd>
<dt class="label" id="id27"><span class="brackets"><a class="fn-backref" href="#id11">6</a></span></dt>
<dd><p>Khartchenko, E. (2018) Vectorization: A Key Tool To Improve Performance On Modern CPUs, <a class="reference external" href="https://www.intel.com/content/www/us/en/developer/articles/technical/vectorization-a-key-tool-to-improve-performance-on-modern-cpus.html">https://www.intel.com/content/www/us/en/developer/articles/technical/vectorization-a-key-tool-to-improve-performance-on-modern-cpus.html</a>.</p>
</dd>
<dt class="label" id="id28"><span class="brackets"><a class="fn-backref" href="#id15">7</a></span></dt>
<dd><p>Developer Reference for Intel oneAPI Math Kernel Library - C, <a class="reference external" href="https://www.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/">https://www.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/</a>.</p>
</dd>
<dt class="label" id="id29"><span class="brackets"><a class="fn-backref" href="#id21">8</a></span></dt>
<dd><p>Flynn’s taxonomy, Wikipedia <a class="reference external" href="https://en.wikipedia.org/wiki/Flynn%27s_taxonomy">https://en.wikipedia.org/wiki/Flynn%27s_taxonomy</a>.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cuda_intro.html" class="btn btn-neutral float-right" title="CUDA Toolkit" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="fastnorm.html" class="btn btn-neutral float-left" title="随机数采样的fastnorm算法及其在蒙特卡洛定价上的应用" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; 版权所有 2022, Essence Security.

    </p>
  </div>
    
    
    
    利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    
    由 <a href="https://readthedocs.org">Read the Docs</a>开发. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>